
/* Smart UI v7.0.0 (2020-Mar)
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-window",class extends Smart.ContentElement{static get properties(){return{collapsed:{value:!1,type:"boolean"},closeOnMaskClick:{value:!1,type:"boolean"},disableSnap:{value:!1,type:"boolean"},footerPosition:{value:"bottom",allowedValues:["bottom","none"],type:"string"},footerTemplate:{value:null,type:"any"},headerButtons:{value:["close","maximize","minimize"],type:"array"},headerPosition:{value:"top",allowedValues:["top","bottom","left","right","none"],type:"string"},headerTemplate:{value:null,type:"any"},label:{value:"",type:"string"},liveResize:{value:!1,type:"boolean"},maximized:{value:!1,type:"boolean"},modal:{value:!1,type:"boolean"},minimized:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},pinned:{value:!1,type:"boolean"},resizeIndicator:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","horizontal","vertical","both","top","bottom","left","right"],value:"none",type:"string"},windowParent:{value:null,type:"any"}}}static get listeners(){return{"document.dragstart":"_dragStartHandler","document.focusin":"_documentFocusInEventHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.wheel":"_mouseWheelHandler","document.selectstart":"_documentSelectStartHandler",down:"_downHandler",focus:"_focusHandler",blur:"_focusHandler",move:"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler"}}get hasStyleObserver(){return!1}static get styleUrls(){return["smart.button.css","smart.window.css"]}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header" role="presentation">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container" role="presentation">
                                <button id="pinButton" class="smart-button smart-element smart-pin-button" aria-label="Pin"></button>
                                <button id="collapseButton" class="smart-button smart-element smart-collapse-button" aria-label="Collapse"></button>
                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button"aria-label="Minimize"></button>
                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="smart-content" inner-h-t-m-l="[[innerHTML]]"><content></content></div>
                        <div id="footer" class="smart-footer"></div>
                    </div>
                </div>`}propertyChangedHandler(e,t,i){const a=this;switch(e){case"collapsed":i?a.collapse(!0):a.expand(!0);break;case"disabled":case"unfocusable":a._setFocusable();break;case"headerTemplate":case"footerTemplate":a._applyLayoutTemplate(a.$[e.split(/[T]/)[0]],i);break;case"headerButtons":a._setHeaderButtons();break;case"headerPosition":{const e=a.minimized;a._preventEventFiring=!0,a.restore(),delete a._preventEventFiring,e&&a.minimize();break}case"label":a.$.header.innerHTML=a.label;break;case"maximized":i?a.maximize(!0):a.restore(e);break;case"modal":a._setModal(),a.setAttribute("aria-modal",i);break;case"minimized":i?a.minimize(!0):a.restore(e);break;case"opened":i?a.open(!0):a.close(!0);break;case"resizeMode":a.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right");break;case"windowParent":a._setElementParent(i);break;default:super.propertyChangedHandler(e,t,i);}}ready(){super.ready();const e=this;e._windowParent={initialParent:e.parentElement}}render(){const e=this,t=e.animation;e.$.header.id||(e.$.header.id=e.id+"Header"),e.$.content.id||(e.$.content.id=e.id+"Content"),e.opened||(e.animation="none"),e._windowParent={initialParent:e.parentElement},e.$.addClass("smart-window"),e._createElement(),e._setElementParent(e.windowParent),e._setHeaderButtons(),e.headerTemplate&&e._applyLayoutTemplate(e.$.header,e.headerTemplate),e.footerTemplate&&e._applyLayoutTemplate(e.$.footer,e.footerTemplate),e.opened?e.open():e.close(),e.maximized&&e.maximize(!0),e.minimized&&e.minimize(!0),e.collapsed&&e.collapse(!0),e.pinned?e.pin():e.unpin(),e._setFocusable(),e.animation=t,e.setAttribute("aria-modal",e.modal),e.setAttribute("aria-labelledby",e.$.header.id),super.render()}static get requires(){return{"Smart.Button":"smart.button.js"}}_setFocusable(){const e=this;if(!e.disabled&&!e.unfocusable){let t=0<e.tabIndex?e.tabIndex:0;e.setAttribute("tabindex",t)}else e.removeAttribute("tabindex")}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}return e?void t.$.content.appendChild(e):void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}collapse(e){const t=this;!e&&t.collapsed||(t.collapsed=!0,t.$.fireEvent("collapse"),"left"===t.headerPosition||"right"===t.headerPosition?t.style.width="":t.style.height="")}close(e){const t=this;if(e||!t.$.hasClass("smart-visibility-hidden")){if(t.isCompleted){const e=t.$.fireEvent("closing").defaultPrevented;if(e)return;t.$.addClass("smart-visibility-hidden"),t.opened=!1,t.isRendered&&t.$.fireEvent("close")}else t.$.addClass("smart-visibility-hidden"),t.opened=!1;t._setModal(),t.removeAttribute("ontop")}}attached(){super.attached();const e=this;!e.isRendered,e._windowParent.parent&&e._windowParent.parent!==document.body&&e._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(e._windowParent.parent.style.position="relative"),e.opened&&e._modal&&e.parentElement.insertBefore(e._modal,e)}bringToFront(){const e=this;if(e.parentElement){const t=e.parentElement.closest(".smart-window");if(t)return void t.bringToFront();const i=document.body.getElementsByClassName("smart-window");for(let e=0;e<i.length;e++)i[e].removeAttribute("ontop");1===i.length&&i[0]===e||e.setAttribute("ontop","")}}clear(){const e=this;e.isCompleted&&"Smart-WINDOW"===e.nodeName&&(e.$.content.innerHTML="")}detached(){super.detached();const e=this;e._windowParent.parent&&!e._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(e._windowParent.parent.style.position=""),e._modal&&e._modal.parentElement&&e._modal.parentElement.removeChild(e._modal),e._resizeDummy&&e._resizeDummy.parentElement&&e._handleWindowResizeDummy(),e._refreshMinimizedWindowsPosition()}expand(e){var t=Math.max;const i=this;(e||i.collapsed)&&(i.collapsed=!1,i.$.fireEvent("expand"),i.maximized?"left"===i.headerPosition||"right"===i.headerPosition?i.style.width=t(i._windowParent.scrollElement.scrollWidth,i._windowParent.element.clientWidth)-i._windowParent.borderWidth+"px":i.style.height=t(i._windowParent.scrollElement.scrollHeight,i._windowParent.element.clientHeight)-i._windowParent.borderWidth+"px":"left"===i.headerPosition||"right"===i.headerPosition?i.style.width=0>i.className.indexOf("smart-window-snapped-")&&i._dragDetails?i._dragDetails.width+"px":"":i.style.height=0>i.className.indexOf("smart-window-snapped-")&&i._dragDetails?i._dragDetails.height+"px":"")}maximize(e){function t(){if(a.maximized&&a.hasAnimation){const e=a._windowParent.scrollElement.scrollHeight,o=a._windowParent.element.clientHeight,n=i(e,o);"top"===a.headerPosition||"bottom"===a.headerPosition?!a.collapsed&&(a.style.height=e>o?n-a._windowParent.borderWidth+"px":"100%"):a.style.height=e>o?n-a._windowParent.borderWidth+"px":"100%",a.removeEventListener("transitionend",t)}}var i=Math.max;const a=this;if(e||!a.maximized){a.minimized&&a._restoreFromMinimization(e),a._setDragDetails("minimize"),"none"!==a.resizeMode&&a.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right"),a._snapDummy&&a.$.hasClass("smart-window-snapped-"+a._snapDummy._position)&&a.classList.remove("smart-window-snapped-"+a._snapDummy._position),a.maximized=!0,a.$.fireEvent("maximize"),a.style.left=a.style.top=0,a.style.maxWidth=a.style.maxHeight="none";const o=a._windowParent.scrollElement.scrollHeight,n=a._windowParent.scrollElement.scrollWidth,s=a._windowParent.element.clientHeight,d=a._windowParent.element.clientWidth,l=i(o,s),r=i(n,d);"top"===a.headerPosition||"bottom"===a.headerPosition?(a.style.width=n>d?r-a._windowParent.borderWidth+"px":"100%",!a.collapsed&&(a.style.height=o>s?l-a._windowParent.borderWidth+"px":"100%")):(!a.collapsed&&(a.style.width=n>d?r-a._windowParent.borderWidth+"px":"100%"),a.style.height=o>s?l-a._windowParent.borderWidth+"px":"100%"),"100%"!==a.style.height&&a.addEventListener("transitionend",t)}}minimize(e){const t=this;if(e||!t.minimized){t.maximized&&(t._preventEventFiring=!0,t.restore(),delete t._preventEventFiring),t._setDragDetails(),t.minimized=!0,t.$.fireEvent("minimize"),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&(t.$.removeClass("smart-window-snapped-"+t._snapDummy._position),t.style.right=t.style.top=t.style.left="");const e=t._getAllMinimizedWindows(t._windowParent.element);if(0<e.length){const i=e[e.length-1];t.style.left=(i.offsetLeft+i.offsetWidth+t._dragDetails.minWidth+10>t._windowParent.element.clientWidth?i.offsetLeft:i.offsetLeft+i.offsetWidth+5)+"px",t.style.top=i.offsetTop+"px"}else t.style.left="5px",t.style.top=t._windowParent.element.clientHeight+t._windowParent.scrollElement.scrollTop-t.$.headerSection.offsetHeight-5+"px";t.style.width="",t.style.height=t.$.headerSection.offsetHeight+"px"}}_createElement(){this.setAttribute("role","dialog")}removeChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}return e?void t.$.content.removeChild(e):void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}restore(e){var t=Math.min,i=Math.max;const a=this;if("maximized"===e||a.maximized?(a.maximized=!1,a.style.width=a.style.height=a.style.top=a.style.left=""):("minimized"===e||a.minimized)&&a._restoreFromMinimization(e),a._preventEventFiring||a.$.fireEvent("restore"),a.style.maxWidth=a.style.maxHeight="",a._dragDetails){if(a.style.left=i(0,t(a._dragDetails.windowX,a._windowParent.element.clientWidth-a._dragDetails.width))+"px",a.style.top=i(0,t(a._dragDetails.windowY,a._windowParent.scrollElement.scrollHeight-a._dragDetails.height))+"px",a.collapsed)return void("top"===a.headerPosition||"bottom"===a.headerPosition?a.style.width=a._dragDetails.width+"px":a.style.height=a._dragDetails.height+"px");a._dragDetails.resized&&(a.style.width=a._dragDetails.width+"px",a.style.height=a._dragDetails.height+"px")}}open(e){function t(){i.focus(),i.removeEventListener("transitionend",t)}const i=this;if(e||i.$.hasClass("smart-visibility-hidden")){if(i.isCompleted){const e=i.$.fireEvent("opening").defaultPrevented;if(e)return;i.$.removeClass("smart-visibility-hidden"),i.opened=!0,i.$.fireEvent("open")}else i.$.removeClass("smart-visibility-hidden"),i.opened=!0;i.bringToFront(),i._setModal(),i._handleActiveState(),i.hasAnimation?i.addEventListener("transitionend",t):t()}}pin(){this.pinned=!0}unpin(){this.pinned=!1}_applyLayoutTemplate(e,t){const i=this;return t?"content"in document.createElement("template")?(t instanceof HTMLTemplateElement||(t=document.getElementById(t)),null!==t&&"content"in t?void(e.innerHTML="",e.appendChild(document.importNode(t.content,!0))):void i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:e===i.$.footer?"footerTemplate":"headerTemplate"}))):void i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()})):(e.innerHTML="",void(e===i.$.header&&i.label&&(e.innerHTML=i.label)))}_cancelDragging(e){const t=this;if(t._dragDetails&&t._dragDetails.started&&"drag"===t._dragDetails.type){if(!e){const i=t.getBoundingClientRect();e={pageX:i.left,pageY:i.top}}t.$.fireEvent("dragEnd",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged"),t._dragDetails.started=!1,delete t._mouseManipulation}}_documentFocusInEventHandler(e){const t=this;t._changingFocus&&(!t.contains(e.target)&&t.focus(),delete t._changingFocus)}_downHandler(e){const t=this;let i=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target;if((t.shadowRoot||t.isInShadowDOM)&&(i=e.originalEvent.composedPath()[0]),e.stopPropagation(),t.disabled||!Smart.Utilities.Core.isMobile&&1!==e.which)return;if(t._tabsWindow&&(t._tabsWindow._isAutoHideWindowClicked=!0),t.hasAttribute("ontop")||t.bringToFront(),i.closest&&i.closest(".smart-buttons-container")===t.$.buttonsContainer){if(t._buttonPressed=i.closest(".smart-button"),t._buttonPressed)return;}else if(i.getRootNode()&&i.getRootNode().host&&(t._buttonPressed=i.getRootNode().host,t._buttonPressed.closest(".smart-buttons-container")===t.$.buttonsContainer))return;t._isWindowContentClicked=i.closest(".smart-content");let a=t.closest("smart-docking-layout");if(t.isInShadowDOM&&!a)for(let e=t.getRootNode().host;e&&(a=e.closest("smart-docking-layout"),!a)&&!!e.getRootNode();)e=e.getRootNode().host;return t instanceof Smart.TabsWindow&&a&&a.disabled?void 0:(t._handleActiveState(),t instanceof Smart.TabsWindow&&a?void(t.$.hasClass("smart-docking-layout-auto-hide-window")&&(Smart.Utilities.Core.isMobile&&t._moveHandler(e),"none"!==t.resizeMode&&-1<t.$.container.className.indexOf("smart-window-resizing")&&(t._mouseManipulation=!0,t._setDragDetails("resize",e)))):i.closest(".smart-header-section")===t.$.headerSection&&(void 0===t._dblClickDetails&&(t._dblClickDetails={clicks:0}),clearTimeout(t._dblClickDetails.timeOut),t._dblClickDetails.clicks++,t._dblClickDetails.timeOut=setTimeout(function(){t._dblClickDetails&&(t._dblClickDetails.clicks=0)},300),2===t._dblClickDetails.clicks)?(t._headerDblCickHandler(e),void(t._dblClickDetails.clicks=0)):void(t.maximized||(Smart.Utilities.Core.isMobile&&t._moveHandler(e),!t.pinned&&!t.minimized&&0>t.$.container.className.indexOf("smart-window-resizing")&&(i=i.closest(".smart-header-section"),i&&i===t.$.headerSection&&(t._mouseManipulation=!0,t._setDragDetails("drag",e))),"none"!==t.resizeMode&&-1<t.$.container.className.indexOf("smart-window-resizing")&&(t._mouseManipulation=!0,t._setDragDetails("resize",e)))))}_documentMoveHandler(e){var t=Math.abs,i=Math.min,a=Math.max;const o=this;!o._dragDetails||!o._dragDetails.started||o.minimized||!o._mouseManipulation||5>=t(e.pageX-o._dragDetails.x)&&5>=t(e.pageY-o._dragDetails.y)||(!o.hasAttribute("dragged")&&!o.hasAttribute("resized")&&o.$.fireEvent(o._dragDetails.type+"Start",{left:e.pageX,top:e.pageY,width:o.offsetWidth,height:o.offsetHeight}),e.stopPropagation(),"drag"!==o._dragDetails.type||o.pinned?(o._dragDetails.resized=!0,o._resize(o._dragDetails.side,e),o._dragDetails.x=a(o._windowParent.offsetLeft+o._dragDetails.left,i(o._windowParent.offsetLeft+o._dragDetails.left+(-1<o._dragDetails.side.toLowerCase().indexOf("left")?0:o._dragDetails.newWidth),e.pageX)),o._dragDetails.y=a(o._windowParent.offsetTop+o._dragDetails.top,i(o._windowParent.offsetTop+o._dragDetails.top+(-1<o._dragDetails.side.toLowerCase().indexOf("top")?0:o._dragDetails.newHeight),e.pageY))):(o.setAttribute("dragged",""),o._snapDummy&&o.$.hasClass("smart-window-snapped-"+o._snapDummy._position)&&(o.$.removeClass("smart-window-snapped-"+o._snapDummy._position),o.style.right=o.style.top=o.style.left="",!o.collapsed&&(o.style.height=o._dragDetails.height+"px",o.style.width=o._dragDetails.width+"px")),o._drag(e,"both"),o._dragDetails.x=a(o._windowParent.offsetLeft+o._dragDetails.offsetX-o._windowParent.scrollElement.scrollLeft,i(o._windowParent.offsetLeft+o._windowParent.element.offsetWidth-(o._windowParent.element.offsetWidth-o.offsetLeft)+o._dragDetails.offsetX,e.pageX)),o._dragDetails.y=a(o._windowParent.offsetTop+o._dragDetails.offsetY-o._windowParent.scrollElement.scrollTop,i(o._windowParent.offsetTop+o._windowParent.element.offsetHeight-(o._windowParent.element.offsetHeight-o.offsetTop)+o._dragDetails.offsetY,e.pageY)),e.pageX>=o._windowParent.offsetLeft+o._windowParent.scrollElement.scrollWidth-1?o._handleSnapping("right"):e.pageY<=o._windowParent.offsetTop?o._handleSnapping("top"):e.pageX<=o._windowParent.offsetLeft?o._handleSnapping("left"):o._handleSnapping()))}_documentUpHandler(e){const t=this,i=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.disabled)return t.removeAttribute("active"),delete t._buttonPressed,void delete t._isWindowContentClicked;if(t._dragDetails&&t._dragDetails.started&&(t.hasAttribute("resized")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t.removeAttribute("resized"),t._handleWindowResizeDummy(),t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right")),setTimeout(function(){t.$.removeClass("no-transition")},20),t.hasAttribute("dragged")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged")),t._dragDetails.started=!1,delete t._mouseManipulation),t._snapDummy&&!t._snapDummy.classList.contains("smart-visibility-hidden")){switch(t._snapDummy._position){case"left":case"top":t.style.left=t.style.top="0",t.style.right="auto";break;case"right":t.style.left="auto",t.style.top=t.style.right="0";}t.style.width="top"===t._snapDummy._position?"100%":"50%",t.style.height="100%",t.$.addClass("smart-window-snapped-"+t._snapDummy._position),t._handleSnapping()}t._modal&&i===t._modal&&!t._isWindowContentClicked&&(t.closeOnMaskClick?t.close():t.focus()),t._isWindowButton(i)&&t.focus(),delete t._isWindowContentClicked,delete t._buttonPressed;const a=t.shadowRoot&&t._windowParent.element&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;if(!t.hasAttribute("active")||a===t)return;if(!i.closest)return;let o=i.closest(".smart-window");for(;o&&o!==t;)o=o.parentElement.closest(".smart-window");t.opened&&o!==t&&t.removeAttribute("active")}_documentSelectStartHandler(e){const t=this;t._dragDetails&&t._dragDetails.started&&e.preventDefault()}_drag(e,t){var i=Math.min,a=Math.max;const o=this;if(!e||o.pinned||o.maximized)return;let n,s;o._dragDetails&&o._dragDetails.started||o._setDragDetails("drag",e),o.$.addClass("no-transition"),"object"==typeof e?(n=e.pageX-o._dragDetails.x,s=e.pageY-o._dragDetails.y):n=s=e;const d=a(o._windowParent.element.clientHeight,o._windowParent.scrollElement.scrollHeight),l=a(o._windowParent.element.clientWidth,o._windowParent.scrollElement.scrollWidth);"horizontal"===t?(o._dragDetails.windowX=a(0,i(o._dragDetails.windowX+n,l-o.offsetWidth)),o.style.left=o._dragDetails.windowX+"px"):"vertical"===t?(o._dragDetails.windowY=a(0,i(o._dragDetails.windowY+s,d-o.offsetHeight)),o.style.top=o._dragDetails.windowY+"px"):"both"===t?(o._dragDetails.windowX=a(0,i(o._dragDetails.windowX+n,l-o.offsetWidth)),o._dragDetails.windowY=a(0,i(o._dragDetails.windowY+s,d-o.offsetHeight)),o.style.left=o._dragDetails.windowX+"px",o.style.top=o._dragDetails.windowY+"px"):void 0;o._dragDetails.top=o.offsetTop,o._dragDetails.left=o.offsetLeft}_dragStartHandler(e){const t=this;t._dragDetails&&t._dragDetails.started&&e.preventDefault()}_focusHandler(e){const t=this;"focus"===e.type?(t.setAttribute("focus",""),t.bringToFront()):!t._buttonPressed&&(t.removeAttribute("focus"),t._dragDetails&&t._dragDetails.started&&t._handleWindowResizeDummy())}_getAllMinimizedWindows(e){const t=this;let a=[];e||(e=t._windowParent.element);const o=e.getElementsByTagName("smart-window");for(let n=0;n<o.length;n++)o[n]!==t&&o[n].hasAttribute("minimized")&&a.push(o[n]);return a.sort(function(e,t){let i=e.getBoundingClientRect(),a=t.getBoundingClientRect();return i.right-a.right}),a}_handleSnapping(e){const t=this;return e?void(t.disableSnap||t.collapsed||(!t._snapDummy&&(t._snapDummy=document.createElement("div"),t._snapDummy.addEventListener("transitionend",function(){t._snapDummy.classList.contains("smart-visibility-hidden")&&t._snapDummy.parentElement&&t._snapDummy.parentElement.removeChild(t._snapDummy)})),t._snapDummy.className="smart-window-snap-"+e+"-feedback",t._snapDummy._position=e,!t._snapDummy.parentElement&&t._windowParent.element.appendChild(t._snapDummy))):void(t._snapDummy&&t._snapDummy.parentElement&&t._snapDummy.classList.add("smart-visibility-hidden"))}_headerDblCickHandler(e){const t=this,i=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;i!==t.$.headerSection&&i!==t.$.header||t.$.maximizeButton&&0===t.$.maximizeButton.offsetHeight||(t.maximized?t.restore():t.maximize())}_isWindowButton(e){const t=this;for(;e;){let i=e.closest&&e.closest(".smart-buttons-container");if(i===t.$.buttonsContainer)break;e=e.getRootNode().host}if(e){const i=/smart-(\w+[-]*\w*)-button/ig;if(e=e.closest(".smart-button"),e&&e===t._buttonPressed)return e===t.$.closeButton?(t.close(),!0):e===t.$.collapseButton?(t.collapsed?t.expand():t.collapse(),!0):e===t.$.maximizeButton?(t.maximized?t.restore():t.maximize(),!0):e===t.$.minimizeButton?(t.minimized?t.restore():t.minimize(),!0):e===t.$.pinButton?(t.pinned?t.unpin():t.pin(),!0):i.test(e.className)?(t.$.fireEvent(Smart.Utilities.Core.toCamelCase(e.className.match(i).toString().replace("smart-","").replace("-button","")),{button:e}),!0):void 0}}_keyDownHandler(e){const t=this;if(delete t._changingFocus,!(t.disabled||(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&t._mouseManipulation)){e.stopPropagation();const i="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,a=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(t.minimized||a!==t)return;let o=-1<e.key.indexOf("Right")||-1<e.key.indexOf("Left");if(e.preventDefault(),!o&&e.altKey)return void("ArrowUp"===e.key?t.maximize():t.restore());if(t.maximized)return;if(t.$.addClass("no-transition"),e.ctrlKey&&"none"!==t.resizeMode&&!t.collapsed)return o=-1===["horizontal","vertical","both"].indexOf(t.resizeMode)?t.resizeMode:o?"right":"bottom",t.hasAttribute("dragged")&&t._cancelDragging(e),t.hasAttribute("resized")||t.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void t._resize(o,i);t.pinned||(!t.hasAttribute("dragged")&&(t.setAttribute("dragged",""),t.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),t._drag(i,o?"horizontal":"vertical")),t.$.removeClass("no-transition");break}case"Escape":-1<t.headerButtons.indexOf("close")&&a===t&&t.close();break;case"p":e.altKey&&-1<t.headerButtons.indexOf("pin")&&(t.pinned?t.unpin():t.pin());break;case"c":e.altKey&&-1<t.headerButtons.indexOf("collapse")&&(t.collapsed?t.expand():t.collapse());break;case"m":e.altKey&&-1<t.headerButtons.indexOf("minimize")&&(t.minimized?t.restore():t.minimize());break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let i;if(t.shadowRoot||t.isInShadowDOM?(i=e.composedPath()[0],t._buttonPressed=i.getRootNode().host):(i=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=i),!i)return;t._isWindowButton(i),delete t._buttonPressed;break}}}}_keyUpHandler(e){const t=this;if(e.key){if("Control"===e.key&&t._dragDetails&&t.hasAttribute("resized")&&!t._mouseManipulation){if(!t._dragDetails.started)return;"drag"!==t._dragDetails.type&&(t.removeAttribute("resized"),t.$.fireEvent("resizeEnd",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t._handleWindowResizeDummy()),t._dragDetails.started=!1}-1<e.key.indexOf("Arrow")&&t.hasAttribute("dragged")&&!t._mouseManipulation&&t._cancelDragging(e)}}_mouseWheelHandler(e){const t=this;return t.disabled||!(t._dragDetails&&t._dragDetails.started)?void 0:0>e.deltaY&&0>=t._windowParent.scrollElement.scrollTop+e.deltaY?void(t.style.top=Math.max(0,t._dragDetails.windowY)+"px"):void(0<e.deltaY&&(t._dragDetails.windowY+t.offsetHeight+e.deltaY>=t._windowParent.scrollElement.scrollHeight||t._windowParent.scrollElement.scrollTop+t._windowParent.element.clientHeight===t._windowParent.scrollElement.scrollHeight)||("drag"===t._dragDetails.type?(t._dragDetails.windowY+=e.deltaY,t.style.top=t._dragDetails.windowY+"px"):(t._dragDetails.height+=e.deltaY,t.style.height=t._dragDetails.height+"px")))}_moveHandler(e){const t=this;if(!(t.disabled||t.collapsed||t.maximized||t.minimized)&&(Smart.Utilities.Core.isMobile&&!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&t.hasAttribute("dragged")&&e.originalEvent.preventDefault(),!t._mouseManipulation)&&(-1<t.$.container.className.indexOf("smart-window-resizing")&&t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right"),"none"!==t.resizeMode)){const i=t.getBoundingClientRect(),a=!!(e.clientY<i.top+10),o=!!(e.clientY>i.bottom-10),n=!!(e.clientX>i.right-10),s=!!(e.clientX<i.left+10);switch(t.resizeMode){case"none":break;case"both":if(t.resizeIndicator)return void(o&&n&&t.$.container.classList.add("smart-window-resizing-bottom-right"));if(s||n)return a?void t.$.container.classList.add("smart-window-resizing-top-"+(s?"left":"right")):o?void t.$.container.classList.add("smart-window-resizing-bottom-"+(s?"left":"right")):void t.$.container.classList.add("smart-window-resizing-"+(s?"left":"right"));if(a||o){if(n)return void t.$.container.classList.add("smart-window-resizing-"+(a?"top-right":"bottom-right"));if(s)return void t.$.container.classList.add("smart-window-resizing-"+(a?"top-left":"bottom-left"));t.$.container.classList.add("smart-window-resizing-"+(a?"top":"bottom"))}break;case"horizontal":if(t.resizeIndicator)return void(o&&n&&t.$.container.classList.add("smart-window-resizing-right"));if(s)return void t.$.container.classList.add("smart-window-resizing-left");n&&t.$.container.classList.add("smart-window-resizing-right");break;case"vertical":if(t.resizeIndicator)return void(o&&n&&t.$.container.classList.add("smart-window-resizing-bottom"));if(a)return void t.$.container.classList.add("smart-window-resizing-top");o&&t.$.container.classList.add("smart-window-resizing-bottom");break;case"top":if(a){if(t.resizeIndicator&&!s)return;t.$.container.classList.add("smart-window-resizing-top")}break;case"bottom":if(o){if(t.resizeIndicator&&!n)return;t.$.container.classList.add("smart-window-resizing-bottom")}break;case"left":if(s){if(t.resizeIndicator&&!a)return;t.$.container.classList.add("smart-window-resizing-left")}break;case"right":if(n){if(t.resizeIndicator&&!o)return;t.$.container.classList.add("smart-window-resizing-right")}}}}_handleActiveState(){const e=this,t=document.getElementsByClassName("smart-window");for(let i=0;i<t.length;i++)t[i].contains(e)||e.contains(t[i])||(t[i].removeAttribute("active"),t[i].removeAttribute("focus"));e.setAttribute("active","")}_handleWindowResizeDummy(){const e=this;return e._resizeDummy||(e._resizeDummy=document.createElement("div"),e._resizeDummy.classList.add("smart-window-resize-feedback")),e.hasAttribute("resized")?void(e._resizeDummy.parentElement||(e._resizeDummy.style.width=e.offsetWidth+"px",e._resizeDummy.style.height=e.offsetHeight+"px",e._resizeDummy.style.top=e.offsetTop+"px",e._resizeDummy.style.left=e.offsetLeft+"px",e._windowParent.element.appendChild(e._resizeDummy))):(e._resizeDummy.parentElement&&e._resizeDummy.parentElement.removeChild(e._resizeDummy),void(!e.liveResize&&"resize"===e._dragDetails.type&&e._dragDetails.started&&(e.style.top=e._dragDetails.top+"px",e.style.left=e._dragDetails.left+"px",e.style.width=e._dragDetails.newWidth+"px",e.style.height=e._dragDetails.newHeight+"px")))}_resize(e,t){var i=Math.abs,a=Math.min,o=Math.max;const n=this;let s;if((!n._dragDetails||n._dragDetails&&"drag"===n._dragDetails.type)&&n._setDragDetails("resize"),!!n._dragDetails){n._dragDetails.started=!0,n.hasAttribute("resized")||(n.setAttribute("resized",""),n.hasAnimation&&n.$.addClass("no-transition")),n.liveResize||n._handleWindowResizeDummy();const d=n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)?"snapWindowWidth":"width";switch(e){case"left":{s="object"==typeof t?t.pageX-n._dragDetails.x:t,s=0<s?a(s,n._dragDetails[d]-n._dragDetails.minWidth):-1*a(n._dragDetails.maxWidth?n._dragDetails.maxWidth-n._dragDetails[d]:n._dragDetails.left,i(s)),n._dragDetails[d]=a(n._dragDetails[d]+n._dragDetails.left-n._windowParent.scrollElement.scrollLeft,n._dragDetails[d]-s),n._dragDetails.windowX=o(n._windowParent.scrollElement.scrollLeft,n._dragDetails.windowX+s),"object"!=typeof t&&(n._dragDetails[d]=o(n._dragDetails[d],n._dragDetails.minWidth)),n._dragDetails[d]>=n._dragDetails.minWidth&&(n._dragDetails.left=n._dragDetails.windowX,n._dragDetails.newWidth=n._dragDetails[d]);break}case"right":{const e=n._windowParent.element.clientWidth===n._windowParent.element.offsetWidth?0:n._windowParent.borderWidth,i=n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)?"snapWindowWidth":"width";s="object"==typeof t?t.pageX-n._dragDetails.x:t,0<s&&n._dragDetails.maxWidth&&(s=a(n._dragDetails.maxWidth-n._dragDetails[i],s)),n._dragDetails[i]=a(n._windowParent.element.clientWidth+n._windowParent.scrollElement.scrollLeft-n._dragDetails.left-e,o(0,n._dragDetails[i]+s)),"object"!=typeof t&&(n._dragDetails[i]=o(n._dragDetails[i],n._dragDetails.minWidth)),n._dragDetails.left=n.offsetLeft,n._dragDetails.newWidth=o(n._dragDetails.minWidth,n._dragDetails[i]);break}case"top":n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&(n._dragDetails.height=n._dragDetails.snapWindowHeight),s="object"==typeof t?t.pageY-n._dragDetails.y:t,s=0<s?a(s,n._dragDetails.height-n._dragDetails.minHeight):-1*a(n._dragDetails.maxHeight?n._dragDetails.maxHeight-n._dragDetails.height:n._dragDetails.top,i(s)),n._dragDetails.snapWindowHeight=n._dragDetails.height=a(n._dragDetails.height+n._dragDetails.top-n._windowParent.scrollElement.scrollTop,n._dragDetails.height-s),n._dragDetails.windowY=o(n._windowParent.scrollElement.scrollTop,n._dragDetails.windowY+s),"object"!=typeof t&&(n._dragDetails.snapWindowHeight=n._dragDetails.height=o(n._dragDetails.height,n._dragDetails.minHeight)),n._dragDetails.height>=n._dragDetails.minHeight&&(n._dragDetails.top=n._dragDetails.windowY,n._dragDetails.newHeight=n._dragDetails.height),n._dragDetails.newWidth=o(n._dragDetails[d],n._dragDetails.newWidth);break;case"bottom":n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&(n._dragDetails.height=n._dragDetails.snapWindowHeight),s="object"==typeof t?t.pageY-n._dragDetails.y:t,0<s&&n._dragDetails.maxHeight&&(s=a(n._dragDetails.maxHeight-n._dragDetails.height,s)),n._dragDetails.snapWindowHeight=n._dragDetails.height=a(n._windowParent.element.clientHeight+n._windowParent.scrollElement.scrollTop-n._dragDetails.top-n._windowParent.borderWidth,o(0,n._dragDetails.height+s)),"object"!=typeof t&&(n._dragDetails.snapWindowHeight=n._dragDetails.height=o(n._dragDetails.height,n._dragDetails.minHeight)),n._dragDetails.newHeight=o(n._dragDetails.minHeight,n._dragDetails.height),n._dragDetails.newWidth=o(n._dragDetails[d],n._dragDetails.newWidth);break;case"bottomLeftCorner":n._resize("bottom",t),n._resize("left",t);break;case"bottomRightCorner":n._resize("bottom",t),n._resize("right",t);break;case"topLeftCorner":n._resize("top",t),n._resize("left",t);break;case"topRightCorner":n._resize("top",t),n._resize("right",t);}const l=n.liveResize?n:n._resizeDummy;n._dragDetails.newHeight=o(n._dragDetails.snapWindowHeight,n._dragDetails.newHeight),l.style.top=n._dragDetails.top+"px",l.style.left=n._dragDetails.left+"px",l.style.width=n._dragDetails.newWidth+"px",l.style.height=n._dragDetails.newHeight+"px"}}_restoreFromMinimization(){const e=this;e.minimized=!1,e.style.width=e.style.height=e.style.top=e.style.left="",e._refreshMinimizedWindowsPosition()}_refreshMinimizedWindowsPosition(){const e=this,t=e._getAllMinimizedWindows();if(0===t.length)return;t[0].style.left="5px";let a;for(let o=1;o<t.length;o++)parseFloat(t[o-1].style.left)+t[o-1].offsetWidth+t[o].offsetWidth+10<e._windowParent.element.clientWidth?(t[o].style.left=parseFloat(t[o-1].style.left)+t[o-1].offsetWidth+5+"px",t[o].style.top=t[o-1].offsetTop+"px",a=t[o]):(t[o].style.left=parseFloat(a.style.left)+"px",t[o].style.top=a.offsetTop+"px")}_setHeaderButtons(){const e=this,t=e.headerButtons,i=e.$.buttonsContainer.children,a=function(t){const i=e.$.buttonsContainer.getElementsByClassName("smart-"+(t+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button")[0];return i&&i.classList.remove("smart-hidden"),i};for(let e=0;e<i.length;e++)i[e].classList.add("smart-hidden");if(0<t.length)for(let o,n=0;n<t.length;n++){if(o=a(t[n]),!o){const e=(t[n]+"").split(/(?=[A-Z])/);o=document.createElement("button"),o.setAttribute("aria-label",e.map(e=>e.slice(0,1).toUpperCase()+e.slice(1)).join(" ")),o.classList.add("smart-"+e.join("-").toLowerCase()+"-button","smart-button","smart-element")}e.$.buttonsContainer.insertBefore(o,e.$.buttonsContainer.firstElementChild)}}_setDragDetails(e,t){const i=this;if(i._dragDetails||(i._dragDetails={}),void 0===i._dragDetails.minWidth||void 0===i._dragDetails.minHeight||void 0===i._dragDetails.maxWidth||void 0===i._dragDetails.maxHeight){const e=getComputedStyle(i);i._dragDetails.minWidth=parseFloat(e.getPropertyValue("min-width"))||0,i._dragDetails.minHeight=parseFloat(e.getPropertyValue("min-height"))||0,i._dragDetails.maxWidth=parseFloat(e.getPropertyValue("max-width"))||0,i._dragDetails.maxHeight=parseFloat(e.getPropertyValue("max-height"))||0}i._dragDetails.windowX=i.offsetLeft,i._dragDetails.windowY=i.offsetTop;const a=i.getBoundingClientRect();if(!i._snapDummy||!i.$.hasClass("smart-window-snapped-"+i._snapDummy._position)){const o=i.parentElement===document.body?document.documentElement.getBoundingClientRect():i.parentElement.getBoundingClientRect(),n=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;i._windowParent.offsetLeft=o.left+n,i._windowParent.offsetTop=o.top+s,t&&"object"==typeof t&&(i._dragDetails.offsetX=t.clientX-a.left,i._dragDetails.offsetY=t.clientY-a.top),i.collapsed||(i.hasAnimation&&"minimize"===e?(i._dragDetails.width=i._dragDetails.width?i._dragDetails.width:i.offsetWidth,i._dragDetails.height=i._dragDetails.height?i._dragDetails.height:i.offsetHeight):(i._dragDetails.width=i.offsetWidth,i._dragDetails.height=i.offsetHeight),(i.style.width||i.style.height)&&(i._dragDetails.resized=!0))}else"right"===i.headerPosition&&i.collapsed&&(i._dragDetails.offsetX=a.left+i.offsetWidth-t.clientX);if("minimize"!==e&&e&&(i._dragDetails.type=e,i._dragDetails.started=!0,i._dragDetails.snapWindowWidth=i.offsetWidth,i._dragDetails.snapWindowHeight=i.offsetHeight,t&&"object"==typeof t?(i._dragDetails.x=t.pageX,i._dragDetails.y=t.pageY):(i._dragDetails.x=i.offsetLeft,i._dragDetails.y=i.offsetTop),"resize"===e)){if("none"===i.resizeMode)return void delete i._dragDetails;i._dragDetails.top=i.offsetTop,i._dragDetails.left=i.offsetLeft,i._dragDetails.newWidth=i._dragDetails.width,i._dragDetails.newHeight=i._dragDetails.height,i.$container.hasClass("smart-window-resizing-right")?i._dragDetails.side="right":i.$container.hasClass("smart-window-resizing-left")?i._dragDetails.side="left":i.$container.hasClass("smart-window-resizing-top")?i._dragDetails.side="top":i.$container.hasClass("smart-window-resizing-bottom")?i._dragDetails.side="bottom":i.$container.hasClass("smart-window-resizing-top-left")?i._dragDetails.side="topLeftCorner":i.$container.hasClass("smart-window-resizing-bottom-left")?i._dragDetails.side="bottomLeftCorner":i.$container.hasClass("smart-window-resizing-top-right")?i._dragDetails.side="topRightCorner":i.$container.hasClass("smart-window-resizing-bottom-right")&&(i._dragDetails.side="bottomRightCorner")}}_setElementParent(e){const t=this;if(t._windowParent.element=void 0,t._windowParent.parent&&!t._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(t._windowParent.parent.style.position=""),e instanceof HTMLElement?t._windowParent.element=e:"string"==typeof e&&(t._windowParent.element="body"===e?document.body:document.getElementById(e)),t._windowParent.element||(t._windowParent.element=t._windowParent.initialParent.getRootNode().host||t._windowParent.initialParent.parentElement?t._windowParent.initialParent:document.body),t.parentElement!==t._windowParent.element&&t._windowParent.element.appendChild(t),t._windowParent.element===document.body)t._windowParent.element=document.documentElement,t._windowParent.scrollElement=document.scrollingElement,t._windowParent.parent=document.body,t._windowParent.borderWidth=0;else{if(t.parentElement instanceof Smart.Window&&!t.parentElement.isCompleted)return void t.parentElement.whenRendered(function(){t.parentElement.appendChild(t),t._setElementParent(t.windowParent)});t._windowParent.element instanceof Smart.Window&&(t._windowParent.element=t._windowParent.element.$.content);const e=getComputedStyle(t.parentElement),i=e.getPropertyValue("position");t._windowParent.borderWidth=2*parseInt(e.getPropertyValue("border-width")||0),t._windowParent.parent=t.parentElement,t._windowParent.scrollElement=t._windowParent.element,"relative"!==i&&(t.parentElement.style.position="relative")}t._setModal(),t.style.left&&t.offsetLeft>t._windowParent.scrollElement.scrollWidth&&(t.style.left=t._windowParent.scrollElement.scrollWidth-t.offsetWidth+"px"),t.style.top&&t.offsetTop>t._windowParent.scrollElement.scrollHeight&&(t.style.top=t._windowParent.scrollElement.scrollHeight-t.offsetHeight+"px")}_setModal(){const e=this;if(delete e._changingFocus,!!e._windowParent.element){if(!e.modal)return void(e._modal&&e._modal.parentElement&&(e._modal.parentElement.removeChild(e._modal),delete e._modal));if(e._modal||(e._modal=document.createElement("div"),e._modal.classList.add("smart-modal")),e._windowParent.parent===document.body?e._modal.removeAttribute("nested-modal"):e._modal.setAttribute("nested-modal",""),e._modal._window=e,e.opened&&!e._modal.parentElement){const t=parseInt(getComputedStyle(e).getPropertyValue("z-index"));isNaN(t)||(e._modal.style.zIndex=t-1),e.parentElement.insertBefore(e._modal,e)}else e._modal.parentElement&&e._modal.parentElement.removeChild(e._modal)}}}),Smart("smart-dialog-window",class extends Smart.Window{static get properties(){return{cancelLabel:{value:"Cancel",type:"string"},confirmLabel:{value:"Ok",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0}}}static get listeners(){return{"footer.click":"_footerClickHandler"}}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container">
                                <button id="pinButton" class="smart-pin-button" aria-label="Pin"></button>
                                <button id="collapseButton" class="smart-button smart-element smart-collapse-button" aria-label="Collapse"></button>
                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button" aria-label="Minimize"></button>
                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="smart-content">
                            <content></content>
                        </div>
                        <div id="footer" class="smart-footer">
                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button">[[confirmLabel]]</button>
                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button">[[cancelLabel]]</button>
                        </div>
                    </div>
                </div>`}_createElement(){const e=this;e.setAttribute("role","alertdialog"),e.setAttribute("aria-describedby",e.$.content.id)}_footerClickHandler(e){const t=this,i=e.target;i.closest(".smart-confirm-button")?t.$.fireEvent("confirm"):i.closest(".smart-cancel-button")&&t.$.fireEvent("cancel")}_keyDownHandler(e){const t=this;if(delete t._changingFocus,!(t.disabled||(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&t._mouseManipulation)){e.stopPropagation();const i="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,a=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(t.minimized||a!==t)return;const o=-1<e.key.indexOf("Right")||-1<e.key.indexOf("Left");if(e.preventDefault(),!o&&e.altKey)return void("ArrowUp"===e.key?t.maximize():t.restore());if(t.$.addClass("no-transition"),t.maximized)return;if(e.ctrlKey&&"none"!==t.resizeMode)return t.hasAttribute("dragged")&&t._cancelDragging(e),t.hasAttribute("resized")||t.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void t._resize(o?"right":"bottom",i);t.pinned||(!t.hasAttribute("dragged")&&(t.setAttribute("dragged",""),t.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),t._drag(i,o?"horizontal":"vertical")),t.$.removeClass("no-transition");break}case"Escape":-1<t.headerButtons.indexOf("close")&&a===t&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let i;if(t.shadowRoot||t.isInShadowDOM?(i=e.composedPath()[0],t._buttonPressed=i.getRootNode().host):(i=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=i),!i)return;t._isWindowButton(i),delete t._buttonPressed;break}}}}}),Smart("smart-alert-window",class extends Smart.DialogWindow{static get properties(){return{headerButtons:{value:[],type:"array"}}}_createElement(){const e=this;e.setAttribute("role","alertdialog"),e.setAttribute("aria-describedby",e.$.content.id)}}),Smart("smart-prompt-window",class extends Smart.DialogWindow{static get properties(){return{autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},confirmLabel:{value:"Ok",type:"string"},cancelLabel:{value:"Cancel",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},headerButtons:{value:["close"],type:"array"},form:{value:"",type:"string"},hint:{value:null,type:"any?"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},name:{value:"",type:"string"},placeholder:{value:"",type:"string"},promptLabel:{value:"",type:"string?"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},value:{value:"",type:"string"}}}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container">
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="smart-content">
                            <content></content>
                            <smart-text-box id="textBox"
                                animation="[[animation]]"
                                auto-complete="[[autoComplete]]"
                                max-length="[[maxLength]]"
                                value="{{value}}"
                                form="[[form]]"
                                label="[[promptLabel]]"
                                hint="[[hint]]"
                                display-mode="[[displayMode]]"
                                max-length="[[maxLength]]"
                                placeholder="[[placeholder]]"
                                required="[[required]]"
                                required-message="[[requiredMessage]]"
                                select-all-on-focus="[[selectAllOnFocus]]"
                                theme="[[theme]]"
                                right-to-left="[[rightToLeft]]">
                            </smart-text-box>
                        </div>
                        <div id="footer" class="smart-footer">
                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button flat">[[confirmLabel]]</button>
                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button flat">[[cancelLabel]]</button>
                        </div>
                    </div>
                </div>`}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.TextBox":"smart.textbox.js"}}_footerClickHandler(e){const t=this,i=e.target;i.closest(".smart-confirm-button")?t.$.fireEvent("confirm",{value:t.$.textBox.value}):i.closest(".smart-cancel-button")&&t.$.fireEvent("cancel",{value:t.$.textBox.value})}_keyDownHandler(e){function t(){i._dragDetails&&(i._dragDetails.started=!1),i.$.removeClass("no-transition")}const i=this;if(delete i._changingFocus,!(i.disabled||i._dragDetails&&i._dragDetails.started)){e.stopPropagation();const a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,o=i.enableShadowDOM&&i._windowParent.element.getRootNode()?i._windowParent.element.getRootNode().activeElement:document.activeElement;switch(i.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(o!==i)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?i.maximize():i.restore(),void t();if(i.$.addClass("no-transition"),e.ctrlKey)return i._resize("bottom",a),void t();i._drag(a,"vertical");break;case"ArrowLeft":case"ArrowRight":if(o!==i)return;if(e.preventDefault(),i.$.addClass("no-transition"),e.ctrlKey)return i._resize("right",a),void t();i._drag(a,"horizontal"),i.$.removeClass("no-transition");break;case"Escape":-1<i.headerButtons.indexOf("close")&&o===i&&i.close();break;case"Tab":i.opened&&i.modal&&(i._changingFocus=!0);break;case"Enter":case" ":{let t;if(i.shadowRoot||i.isInShadowDOM?(t=e.composedPath()[0],i._buttonPressed=t.getRootNode().host):(t=e.target.closest&&e.target.closest(".smart-button"),i._buttonPressed=t),!t)return;i._isWindowButton(t),delete i._buttonPressed;break}}t()}}}),Smart("smart-multiline-prompt-window",class extends Smart.PromptWindow{static get properties(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoExpand:{value:!1,type:"boolean"},headerButtons:{value:["close"],type:"array"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container">
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="smart-content">
                            <content></content>
                           <smart-multiline-text-box id="textBox"
                                animation="[[animation]]"
                                horizontal-scroll-bar-visibility= "[[horizontalScrollBarVisibility]]"
                                vertical-scroll-bar-visibility= "[[verticalScrollBarVisibility]]"
                                auto-capitalize="[[autoCapitalize]]"
                                auto-expand = "[[autoExpand]]"
                                selection-direction= "[[selectionDirection]]"
                                selection-end= "[[selectionEnd]]"
                                selection-start="[[selectionStart]]"
                                spell-check= "[[spellCheck]]"
                                wrap="[[wrap]]"
                                max-length="[[maxLength]]"
                                value="{{value}}"
                                form="[[form]]"
                                label="[[promptLabel]]"
                                hint="[[hint]]"
                                display-mode="[[displayMode]]"
                                max-length="[[maxLength]]"
                                placeholder="[[placeholder]]"
                                required="[[required]]"
                                required-message="[[requiredMessage]]"
                                select-all-on-focus="[[selectAllOnFocus]]"
                                theme="[[theme]]"
                                right-to-left="[[rightToLeft]]">
                           </smart-multiline-text-box>
                        </div>
                        <div id="footer" class="smart-footer">
                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button flat">[[confirmLabel]]</button>
                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button flat">[[cancelLabel]]</button>
                        </div>
                    </div>
                </div>`}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.MultilineTextBox":"smart.multilinetextbox.js"}}_footerClickHandler(e){const t=this,i=e.target;i.closest(".smart-confirm-button")?t.$.fireEvent("confirm",{value:t.$.textBox.value}):i.closest(".smart-cancel-button")&&t.$.fireEvent("cancel",{value:t.$.textBox.value})}}),Smart("smart-progress-window",class extends Smart.Window{static get properties(){return{completeLabel:{value:"Continue",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container">
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="smart-content" inner-h-t-m-l="[[innerHTML]]">
                            <content></content>
                        </div>
                        <div id="footer" class="smart-footer">
                            <smart-progress-bar id="progressBar"
                                animation="[[animation]]"
                                min="[[min]]"
                                max="[[max]]"
                                indeterminate="[[inditerminate]]"
                                inverted="[[inverted]]"
                                format-function="[[formatFunction]]"
                                show-progress-value="[[showProgressValue]]"
                                theme="[[theme]]"
                                right-to-left="[[rightToLeft]]"
                                value="{{value}}">
                            </smart-progress-bar>
                            <button id="completeButton" class="smart-button smart-element smart-complete-button smart-visibility-hidden">[[completeLabel]]</button>
                        </div>
                    </div>
                </div>`}static get requires(){return{"Smart.ProgressBar":"smart.progressbar.js"}}propertyChangedHandler(e,t,i){const a=this;switch(e){case"value":a._handleCompletion();break;default:super.propertyChangedHandler(e,t,i);}}_createElement(){const e=this;e.setAttribute("role","dialog"),e._handleCompletion()}_handleCompletion(){const e=this;e.$.completeButton&&(e.value>=e.max?(e.$completeButton.removeClass("smart-visibility-hidden"),e.$progressBar.addClass("smart-visibility-hidden")):(e.$completeButton.addClass("smart-visibility-hidden"),e.$progressBar.removeClass("smart-visibility-hidden")))}_keyDownHandler(e){function t(){i._dragDetails&&(i._dragDetails.started=!1),i.$.removeClass("no-transition")}const i=this;if(delete i._changingFocus,!(i.disabled||i._dragDetails&&i._dragDetails.started)){e.stopPropagation();const a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,o=i.enableShadowDOM&&i._windowParent.element.getRootNode()?i._windowParent.element.getRootNode().activeElement:document.activeElement;switch(i.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(o!==i)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?i.maximize():i.restore(),void t();if(i.$.addClass("no-transition"),e.ctrlKey)return i._resize("bottom",a),void t();i._drag(a,"vertical"),i.$.removeClass("no-transition");break;case"ArrowLeft":case"ArrowRight":if(o!==i)return;if(e.preventDefault(),i.$.addClass("no-transition"),e.ctrlKey)return i._resize("right",a),void t();i._drag(a,"horizontal"),i.$.removeClass("no-transition");break;case"Escape":-1<i.headerButtons.indexOf("close")&&o===i&&i.close();break;case"Tab":i.opened&&i.modal&&(i._changingFocus=!0);break;case"Enter":case" ":{let t;if(i.shadowRoot||i.isInShadowDOM?(t=e.composedPath()[0],i._buttonPressed=t.getRootNode().host):(t=e.target.closest&&e.target.closest(".smart-button"),i._buttonPressed=t),!t)return;i._isWindowButton(t),delete i._buttonPressed;break}}t()}}}),Smart("smart-tabs-window",class extends Smart.Window{static get properties(){return{disableSnap:{value:!0,readOnly:!0,type:"boolean"},dropPosition:{value:["all"],type:"array"},addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},autoHide:{value:!1,type:"boolean"},autoHideWindow:{value:null,type:"any"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},tabCloseButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},tabCloseButtons:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},tabOverflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},tabReorder:{value:!1,type:"boolean"},tabResize:{value:!1,type:"boolean"},tabScrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any"},min:{value:"",type:"any"},size:{value:"",type:"any"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},layout:{value:null,type:"any"}}}static get listeners(){return{"tabsElement.blur":"_tabsFocusHandler","tabsElement.change":"_tabsChangeHandler","tabsElement.focus":"_tabsFocusHandler","autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.open":"_autoHideWindowOpenHandler"}}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container">
                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button" aria-label="Minimize"></button>
                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div id="contentSection" class="smart-content">
                           <smart-tabs id="tabsElement"
                                animation="[[animation]]"
                                add-new-tab="[[addNewTab]]"
                                allow-toggle="[[allowToggle]]"
                                close-button-mode="[[tabCloseButtonMode]]"
                                close-buttons="[[tabCloseButtons]]"
                                disabled="[[disabled]]"
                                overflow="[[tabOverflow]]"
                                reorder="[[tabReorder]]"
                                resize="[[tabResize]]"
                                scroll-buttons-position="[[tabScrollButtonsPosition]]"
                                selected-index="{{selectedIndex}}"
                                selection-mode="[[selectionMode]]"
                                tab-layout="[[tabLayout]]"
                                tab-position="[[tabPosition]]"
                                tab-text-orientation="[[tabTextOrientation]]"
                                theme="[[theme]]"
                                right-to-left="[[rightToLeft]]">
                                <content></content>
                            </smart-tabs>
                        </div>
                        <div id="footer" class="smart-footer smart-hidden"></div>
                    </div>
                </div>`}static get requires(){return{"Smart.Tabs":"smart.tabs.js"}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}return e?void(!(e instanceof Smart.TabItem)&&t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.$.tabsElement.appendChild(e)):void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}insert(e,t){this.$.tabsElement.insert(e,t)}insertBefore(e,t){this.$.tabsElement.insertBefore(e,t)}remove(e){this.$.tabsElement.remove(e)}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}return e?void(!(e instanceof Smart.TabItem)&&t.error(t.localize("tabItemRequired",{method:"removeChild"})),!(t.shadowRoot||t).contains(e)&&t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.$.tabsElement.removeChild(e)):void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}refreshTabHeader(){const e=this;e.$.tabsElement&&e.$.tabsElement.isCompleted&&e.$.tabsElement.refreshTabHeader()}refreshTabs(){const e=this;e.$.tabsElement&&e.$.tabsElement.isCompleted&&e.$.tabsElement._applyTabOverflow()}select(e){this.$.tabsElement.select(e)}update(e,t,i){this.$.tabsElement.update(e,t,i)}get items(){const e=this;return e.isCompleted&&e.$.tabsElement?this.$.tabsElement._tabs:void 0}get itemLabels(){const e=this;return e.$?this.$.tabsElement._tabLabelContainers:void 0}get siblings(){const e=this;let t=[];if(!e.isCompleted)return t;const i=e.closest("smart-splitter");if(!i||!i.closest("smart-docking-layout"))return t;const a=i._items;if(!a||!a.length)return t;for(let o=0;o<a.length;o++){const n=a[o];if(n!==e.closest("smart-splitter-item")){const e=n.querySelector("smart-tabs-window");e.closest("smart-splitter")===i&&t.push(n.querySelector("smart-tabs-window"))}}return t}propertyChangedHandler(e,t,i){const a=this;switch("collapsed"!==e&&super.propertyChangedHandler(e,t,i),e){case"theme":""!==t&&(a.$.closeButton.classList.remove(t),a.$.collapseButton.classList.remove(t),a.$.maximizeButton.classList.remove(t),a.$.pinButton.classList.remove(t)),a._applyTheme(i);break;case"autoHideWindow":a._handleAutoHideWindow();break;case"autoHide":i||(null!==a.$.tabsElement.selectedIndex&&(a.$.tabsElement._tabs[a.$.tabsElement.selectedIndex]._autoHideWindowSize=void 0),a._autoHideWindow&&a._autoHideWindow.close());break;case"dataSource":a.$.tabsElement.dataSource=i;break;case"layout":a._handleLayoutProperty();break;case"collapsible":case"collapsed":case"locked":case"max":case"min":case"size":{const o=(a.isInShadowDOM?a.getRootNode().host:a||a).closest("smart-docking-layout"),n=a.closest("smart-splitter-item");if(!o)return void("collapsed"===e&&super.propertyChangedHandler(e,t,i));n&&(n[e]=i);break}}}_applyTheme(e){const t=this;if(""!==e){const a=t.$.buttonsContainer.children;for(let t=0;t<a.length;t++)a[t].classList.add(e)}}_autoHideWindowCloseHandler(){const e=this;e.allowToggle&&null!==e.$.tabsElement.selectedIndex&&e.$.tabsElement.select(e.$.tabsElement.selectedIndex),e._autoHideWindow&&e._moveContent(e._autoHideWindow.items[0],e._autoHideWindow._tab)}_autoHideWindowOpenHandler(){const e=this;e.$.tabsElement.selectedIndex&&e._handleAutoHide(e.$.tabsElement.selectedIndex)}_createElement(){const e=this;e.setAttribute("role","dialog"),e.$.tabsElement.$.tabHeaderControls&&!e.$.tabsElement.$.tabHeaderControls.innerHTML&&e.$.tabsElement.$tabHeaderControls.addClass("smart-hidden"),e.$.tabsElement.dataSource=e.dataSource,e._applyTheme(e.theme),e._handleAutoHideWindow(),e.autoHide&&e._handleAutoHide(e.$.tabsElement.selectedIndex),e.allowToggle||e.selectedIndex||null===e.$.tabsElement.selectedIndex||(e.selectedIndex=e.$.tabsElement.selectedIndex,e.$.tabsElement.setAttribute("selected-index",e.selectedIndex)),e._handleLayoutProperty();const t=(e.isInShadowDOM?e.getRootNode().host:e||e).closest("smart-docking-layout"),i=e.closest("smart-splitter-item");t&&i&&(i.collapsible=e.collapsible,i.collapsed=e.collapsed,i.min=e.min,i.max=e.max,i.size=e.size,i.locked=e.locked)}attached(){super.attached();const e=this;e.classList.add("smart-window"),e.shadowRoot&&e.$.root.classList.add("smart-window")}_handleLayoutProperty(){const e=this;let t=e.closest("smart-docking-layout");if(Smart.DockingLayout){if(!e.ownerLayout&&e.getRootNode())for(let i=e.getRootNode().host;i;){if(!i.closest)return;if(i.closest("smart-docking-layout")){t=i.closest("smart-docking-layout");break}i=i.getRootNode()?i.getRootNode().host:void 0}return t?void(e.layout=t):void(e.layout instanceof Smart.DockingLayout||"string"==typeof e.layout&&(e.layout=document.getElementById(e.layout)))}}_headerDblCickHandler(e){const t=this,i=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;e.ctrlKey||i!==t.$.headerSection&&i!==t.$.header||t.$.maximizeButton&&0===t.$.maximizeButton.offsetHeight||(t.maximized?t.restore():t.maximize())}_documentUpHandler(e){const t=this;let i=e.originalEvent.target.closest?e.originalEvent.target.closest(".smart-window"):e.originalEvent.target,a=i===t||i===t._autoHideWindow||t._isAutoHideWindowClicked,o=t.closest("smart-docking-layout");return((t.shadowRoot||t.isInShadowDOM)&&(i=e.originalEvent.composedPath()[0],a=i.getRootNode()===t.shadowRoot||i.closest(".smart-window")===t||i.closest(".smart-window")===t._autoHideWindow||t._isAutoHideWindowClicked),o=((t.isInShadowDOM?t.getRootNode().host:t)||t).closest("smart-docking-layout"),o&&o.disabled)?void delete t._isWindowContentClicked:void(super._documentUpHandler(e),delete t._isAutoHideWindowClicked,t.autoHide&&t._autoHideWindow&&(a&&t._autoHideWindow.opened||(t.selectedIndex=null,t._autoHideWindow.parentElement&&t._autoHideWindow.parentElement.closest(".smart-window")===t&&t._autoHideWindow.close())))}_handleAutoHide(e){const t=this;if(t.autoHide&&null!==e&&(t._autoHideWindow||t._handleAutoHideWindow(!0),!!t._autoHideWindow)){t._autoHideWindow._tabsWindow&&t._autoHideWindow._tabsWindow!==t&&(t._autoHideWindow._tabsWindow.selectedIndex=null);const i=t.$.tabsElement._tabs[e];t._autoHideWindow._tab!==i&&t._moveContent(t._autoHideWindow.items[0],t._autoHideWindow._tab),t._autoHideWindow.label=i.label,t._autoHideWindow.draggable=i.draggable,t._autoHideWindow.floatable=i.floatable,t._autoHideWindow._tab=i,t._moveContent(t._autoHideWindow._tab,t._autoHideWindow.items[0]),t._autoHideWindow.bringToFront(),t._setAutoHideWindowSize(e),t._autoHideWindow.open(),t._autoHideWindow._tabsWindow=t,t._autoHideWindow.controlledBy&&t._autoHideWindow.controlledBy.removeAttribute("aria-controls"),t._autoHideWindow.controlledBy=t.$.tabsElement._tabLabelContainers[e],t._autoHideWindow.controlledBy.setAttribute("aria-controls",t._autoHideWindow.id)}}_moveHandler(e){const t=this,i=t.closest("smart-docking-layout");if(i){const e=i.items;if(-1<e.indexOf(t))return}Smart.Utilities.Core.isMobile&&!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&t.layout instanceof Smart.DockingLayout&&t.layout.hasAttribute("dragged")&&e.originalEvent.preventDefault(),super._moveHandler(e)}_setAutoHideWindowSize(e){var t=Math.min;const i=this;if(i._autoHideWindow){i._autoHideWindow.$.addClass("no-transition"),i._autoHideWindow.style.maxWidth=i._autoHideWindow.style.maxHeight="";const a=i.$.tabsElement._tabs[e],o=(i._autoHideWindow.isInShadowDOM?i._autoHideWindow.getRootNode().host:i._autoHideWindow).closest("smart-docking-layout")||i._autoHideWindow.parentElement,n=o.getBoundingClientRect(),s=i.$.tabsElement.getBoundingClientRect();if(a){if("top"===i.tabPosition||"bottom"===i.tabPosition){i._autoHideWindow.resizeMode="top"===i.tabPosition?"bottom":"top",i._autoHideWindow.style.width=i.$.tabsElement.offsetWidth+"px";let e=a._autoHideWindowSize?parseFloat(a._autoHideWindowSize)||"":"";Smart.DockingLayout&&o instanceof Smart.DockingLayout&&(e&&(e=t(o.$.itemsContainer.offsetHeight,e)+"px"),i._autoHideWindow.style.maxHeight=o.$.itemsContainer.offsetHeight+"px"),i._autoHideWindow.style.height=e,i._autoHideWindow.style.left=s.left-n.left+"px",i._autoHideWindow&&("top"===i.tabPosition?i._autoHideWindow.style.top=s.top+-n.top+s.height+"px":i._autoHideWindow.style.top=s.top-n.top-i._autoHideWindow.offsetHeight+"px")}else{i._autoHideWindow.resizeMode="left"===i.tabPosition?"right":"left",i._autoHideWindow.style.height=i.$.tabsElement.offsetHeight+"px";let e=a._autoHideWindowSize?parseFloat(a._autoHideWindowSize)||"":"";o instanceof Smart.DockingLayout&&(e&&(e=t(o.$.itemsContainer.offsetWidth,e)+"px"),i._autoHideWindow.style.maxWidth=o.$.itemsContainer.offsetWidth+"px"),i._autoHideWindow.style.width=e,i._autoHideWindow.style.top=s.top-n.top+"px",i._autoHideWindow.style.left="left"===i.tabPosition?s.left-n.left+i.$.tabsElement.offsetWidth+"px":s.left-n.left-i._autoHideWindow.offsetWidth+"px"}i._autoHideWindow._dragDetails&&(i._autoHideWindow._dragDetails.maxWidth=void 0),i._autoHideWindow._setDragDetails("resize"),i._autoHideWindow._dragDetails.started=!1,i._autoHideWindow.$.removeClass("no-transition")}}}_handleAutoHideWindow(e){const t=this;if(t.autoHideWindow){if(t._autoHideWindow&&t._autoHideWindow.parentElement.removeChild(t._autoHideWindow),"string"==typeof t.autoHideWindow)return void(t._autoHideWindow=document.getElementById(t.autoHideWindow));if(t.autoHideWindow instanceof Smart.Window)return void(t._autoHideWindow=t.autoHideWindow)}if(!(!e||t._autoHideWindow||2===t.$.contentSection.children.length&&t.$.contentSection.children[1]instanceof Smart.Window)){const e=document.createElement("smart-window");e.$=Smart.Utilities.Extend(e),e.disableSnap=e.pinned=!0,e.headerButtons=["close"],t.$.contentSection.appendChild(e),t._autoHideWindow=e}}_moveContent(e,t){if(e&&t){const a=[].slice.call(e.$.content.childNodes);for(let e=0;e<a.length;e++)t.appendChild(a[e])}}_tabsChangeHandler(e){const t=this;if(e.target===t.$.tabsElement&&t.autoHide){if(t._autoHideWindow||t._handleAutoHideWindow(!0),null!==e.detail.oldIndex&&t._autoHideWindow.opened){const i=t.$.tabsElement._tabs[e.detail.oldIndex];i._autoHideWindowSize=t._autoHideWindow.style["right"===t.$.tabsElement.tabPosition||"left"===t.$.tabsElement.tabPosition?"width":"height"]}return t.autoHide&&null!==e.detail.index&&void 0!==e.detail.index?void t._handleAutoHide(e.detail.index):(t._autoHideWindow.setAttribute("active",""),void t._autoHideWindow.close())}}_tabsFocusHandler(e){const t=this;"focus"===e.type?(t.bringToFront(),t.setAttribute("focus","")):t.removeAttribute("focus")}}),Smart("smart-wait-window",class extends Smart.ProgressWindow{static get properties(){return{headerButtons:{value:[],type:"array"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},pinned:{value:!0,type:"boolean",readOnly:!0}}}template(){return`<div>
                    <div class="smart-content-container" id="container">
                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">
                            <div id="header" class="smart-header">[[label]]</div>
                            <div id="buttonsContainer" class="smart-buttons-container">
                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="smart-content">
                            <content></content>
                            <smart-progress-bar id="progressBar" animation="[[animation]]" indeterminate theme="[[theme]]" right-to-left="[[rightToLeft]]"></smart-progress-bar>
                        </div>
                        <div id="footer" class="smart-footer"></div>
                    </div>
                </div>`}_keyDownHandler(e){function t(){i._dragDetails&&(i._dragDetails.started=!1),i.$.removeClass("no-transition")}const i=this;if(delete i._changingFocus,!(i.disabled||i._dragDetails&&i._dragDetails.started)){const a=i.shadowRoot||i._windowParent.element.getRootNode()?i._windowParent.element.getRootNode().activeElement:document.activeElement;e.stopPropagation();const o="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10;switch(i.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(a!==i)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?i.maximize():i.restore(),void t();if(i.$.addClass("no-transition"),e.ctrlKey)return i._resize("bottom",o),void t();i._drag(o,"vertical");break;case"ArrowLeft":case"ArrowRight":if(a!==i)return;if(e.preventDefault(),i.$.addClass("no-transition"),e.ctrlKey)return i._resize("right",o),void t();i._drag(o,"horizontal");break;case"Tab":i.opened&&i.modal&&(i._changingFocus=!0);break;case"Enter":case" ":{let t;if(i.shadowRoot||i.isInShadowDOM?(t=e.composedPath()[0],i._buttonPressed=t.getRootNode().host):(t=e.target.closest&&e.target.closest(".smart-button"),i._buttonPressed=t),!t)return;i._isWindowButton(t),delete i._buttonPressed;break}}t()}}});